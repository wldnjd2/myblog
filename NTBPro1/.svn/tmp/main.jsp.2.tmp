<%@page import="org.stringtemplate.v4.compiler.STParser.mapExpr_return"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ë‚´ê°€ì‹œìŠ¤í…œ :: ê¸°ìˆ ê²Œì‹œíŒ</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha512-8bHTC73gkZ7rZ7vpqUQThUDhqcNFyYi2xgDgPDHc+GXVGHXq+xPjynxIopALmOPqzo9JZj0k6OqqewdGO3EsrQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="<c:url value='css/main/main.css' />">
<script src="<c:url value='js/main/tech_paging.js'/>"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.css" rel="stylesheet" type="text/css">
<script
      src="https://code.jquery.com/jquery-3.1.1.min.js"
      integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous"></script>
<script src="Semantic-UI-CSS-master/semantic.min.js"></script>
<style type="text/css">
	#all_div{
		z-index: 10;
	}
	/* ê³µí†µ ë¶€ë¶„ ì‹œì‘ */
	#modal_back{
		display: none; /* Hidden by default */
		position: fixed; /* Stay in place */
		z-index: 10; /* Sit on top */
		left: 0;
		top: 0;
		width: 100%; /* Full width */
		height: 100%; /* Full height */
		overflow: auto; /* Enable scroll if needed */
		background-color: rgb(0,0,0); /* Fallback color */
		background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	}
	#wrap{
		background-color: #fefefe;
		margin: 15% auto; /* 15% from the top and centered */
		padding: 20px;
		border: 1px solid #888;
		width: 40%; /* Could be more or less, depending on screen size */	
	}
	
	.clear{
	    clear: both;
	}
	/* ê³µí†µ ë¶€ë¶„ ì¢…ë£Œ */
	
	/* header ë¶€ë¶„ ì‹œì‘ */
	#header{
	    padding-bottom: 50px;
	    text-align: center;
	}
	/* header ë¶€ë¶„ ì¢…ë£Œ */
	
	/* main_left ë¶€ë¶„ ì‹œì‘ */
	#main_left{
	    margin: 0 50px 0 70px;
	    width: 100px;
	    float: left;
	}
	#img_btn{
	    margin-top: 10px;
	}
	.thumb{
		border-radius: 50%;
	}
	#image_field #image_field_upload { 
		display: inline-block; 
		padding: .5em .75em; 
		color: #999; 
		font-size: inherit; 
		line-height: normal; 
		vertical-align: middle; 
		background-color: #fdfdfd; 
		cursor: pointer; 
		border: 1px solid #ebebeb;
		border-bottom-color: #e2e2e2; 
		border-radius: .25em; 
	} 
	#image_field input[type="file"] { /* íŒŒì¼ í•„ë“œ ìˆ¨ê¸°ê¸° */ 
	position: absolute; 
	width: 1px; 
	height: 1px; 
	padding: 0; 
	margin: -1px; 
	overflow: hidden; 
	clip:rect(0,0,0,0); 
	border: 0; 
	}

	/* main_left ë¶€ë¶„ ì¢…ë£Œ */
	
	/* main_right ë¶€ë¶„ ì‹œì‘ */
	#main_right{
	    width: 350px;
	    float: left;
	}
	.message{
	    display: none;
	}
	.none{
	    display: none;
	}
	.fr{
	    float: right;
	}
	/* main_right ë¶€ë¶„ ì¢…ë£Œ */
	
	/* footer ë¶€ë¶„ ì‹œì‘*/
	#footer{
	    margin: 30px 0 30px 0;
	    text-align: center;
	}
	/* footer ë¶€ë¶„ ì¢…ë£Œ*/
	
	
	
	/* ì¶”ê°€ */
	#left{
		width:50%;
		height:100px;
		float:left;
	}



	#right{
		width:50%;
		height:100px;
		float:left;
	}
	

</style>



<!-- modal css -->
<style>

	.modal {
		box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
		position: fixed;  
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: flex;
		justify-content: center;
		align-items: center;
	}
/* 	ëª¨ë‹¬ ë°°ê²½í™”ë©´ ì„¤ì • */
	.modal__overlay {
		background-color: rgba(0, 0, 0, 0.6);
		width: 100%;
		height: 100%;
		position: absolute;
	}
	
/* 	ëª¨ë‹¬ ë°•ìŠ¤ì°½ ì„¤ì • */
	.modal__content {
		background-color: white;
		padding: 50px 100px;
		position: relative;
		border-radius: 10px;
		width: 50%;
		top: 0px;
		box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
	}
	
/* 	ëª¨ë‹¬ ìˆ¨ê¸°ê¸° */
	.hidden {
		display: none;
	}
	
	.modal_table {
  		width: 100%;
   	 	border: 1px solid #bcbcbc;
   		border-collapse: collapse;
   	
	}
	th {
		border: 1px solid #bcbcbc;
	}
	
	#center{
	    text-align: center;
	    
	}
	
</style>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript">

	/* ê²Œì‹œê¸€ í•˜ë‹¨ í˜ì´ì§• ì²˜ë¦¬ */
	function pageMove(pageSize, cp, flag){
				
		/* í˜ì´ì§•ì— í•„ìš”í•œ ë³€ìˆ˜ */
		/* í˜„ì¬ í˜ì´ì§€ */
		var currentPage = cp; 
		/* í•œë²ˆì— ê²Œì‹œë  í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ */
		var size = pageSize;
		/* ì´ í˜ì´ì§€ ê°¯ìˆ˜*/
		var tp = Math.ceil($("#totalPage").val());
		/* í˜„ì¬ í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ì˜ ë§ˆì§€ë§‰ í˜ì´ì§€ ë²ˆí˜¸ */
		var ep = Math.ceil(currentPage/size)*10;
		/* í˜„ì¬ í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ì˜ ì²« í˜ì´ì§€ ë²ˆí˜¸ */
		var sp = (ep-size)+1;
		/* ê¸°ì¡´ ë™ê¸°ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆë˜ í•˜ë‹¨ í˜ì´ì§• ë¶€ë¶„ ë°ì´í„°ë¥¼ ì§€ì›€*/
		$("#pagination").empty();

		/* ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ í´ë¦­ì‹œ */
		if (flag == 'next'){
		/* ë¹„ë™ê¸°ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•œ í•˜ë‹¨ í˜ì´ì§• ë¶€ë¶„ htmlì½”ë“œë¥¼ ë‹´ì„ ë³€ìˆ˜ */
		var str = '';
		/* 'ë‹¤ìŒ'ë²„íŠ¼ì„ í´ë¦­í–ˆê¸° ë•Œë¬¸ì— ì‹œì‘ë²ˆí˜¸ì™€ ëë²ˆí˜¸ë¥¼ ì¦ê°€ì‹œì¼œì¤€ë‹¤.*/
		sp += size; // 11
		ep = sp+(size-1); // 20
		/* spë¥¼ í˜„ì¬í˜ì´ì§€ë¡œ ì§€ì • */
		currentPage = sp;
				/* ëí˜ì´ì§€ê°€ ì´ í˜ì´ì§€ë³´ë‹¤ ì‘ë‹¤ë©´ */
				if(ep < tp){
					
					/* ì‹œì‘í˜ì´ì§€ê°€ 1ì´ë¼ë©´ 'ì´ì „'ë²„íŠ¼ ì•ˆë³´ì´ê²Œ*/
					if(sp == 1){
						
						for(var i = sp; i <= ep; i++){
							str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+');">'+i+'</a>'
						}
						str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+currentPage+', \'next\' )">ë‹¤ìŒ</a>'
						
					}else{
						str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+currentPage+', \'pre\')">ì´ì „</a>'
						for(var i = sp; i <= ep; i++){
							str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+');">'+i+'</a>'
						}
						str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+currentPage+', \'next\')">ë‹¤ìŒ</a>'
						
					}
				/* ê·¸ ì™¸ì˜ ê²½ìš°, ëí˜ì´ì§€ê°€ ì´í˜ì´ì§€ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ ë•Œ */
				}else{
					/* ëí˜ì´ì§€ë²ˆí˜¸ë¥¼ ì´í˜ì´ì§€ë¡œ ë²ˆí˜¸ë¡œ ì„¤ì •  */
					ep = tp;
					for(var i = sp; i <= ep; i++){
						str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+');">'+i+'</a>'
					}
					str = '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+currentPage+', \'pre\')">ì´ì „</a>'+str;
				}
		/* ì´ì „ í˜ì´ì§€ */
		}else if (flag == 'pre'){
			/* ë¹„ë™ê¸°ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•œ í•˜ë‹¨ í˜ì´ì§• ë¶€ë¶„ htmlì½”ë“œë¥¼ ë‹´ì„ ë³€ìˆ˜ */
			var str = '';
			/* ì´ì „ ë²„íŠ¼ì„ í´ë¦­í–ˆê¸° ë•Œë¬¸ì— ì‹œì‘ë²ˆí˜¸, ëë²ˆí˜¸ë¥¼ ê°ì†Œì‹œì¼œì¤€ë‹¤*/
			sp -= size;
			ep = sp+(size-1);;
			/* í˜„ì¬ ëí˜ì´ì§€ë¥¼ í˜„ì¬í˜ì´ì§€ë¡œ ì§€ì • */
			currentPage = ep;
				/* ì‹œì‘í˜ì´ì§€ê°€ 1ì´ë¼ë©´ ì´ì „ë²„íŠ¼ ì•ˆë³´ì´ê²Œ*/
				if(sp == 1){
					for(var i = sp; i <= ep; i++){
						str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+');">'+i+'</a>'
					}
					str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+currentPage+', \'next\')">ë‹¤ìŒ</a>'
				}else{
					str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+currentPage+', \'pre\')">ì´ì „</a>'
					for(var i = sp; i <= ep; i++){
						str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+');">'+i+'</a>'
					}
					str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+currentPage+', \'next\')">ë‹¤ìŒ</a>'
				}
			}
			$("#pagination").html(str);
			/* ë‹¤ìŒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‹¤ìŒ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì•¼ í•¨*/
			if(cate == ''){
				pagination(currentPage);
			}else if(cate != ''){
				pagination(currentPage, cate);
			}
	}
	
	/* í˜ì´ì§€ ì´ë™í•˜ë©´ ë°ì´í„°ë¥¼ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ */
	function pagination(cp, category){
		
		
		if(category != ''){
			cate = category;
		}else if(category == ''){
			cate = '';
		}
		$.ajax({
			url: "<c:url value='/main.do'/>",
			type : 'POST',
			data: { 'currentPage' : cp, 'cat_cname' : cate },
			dataType: 'json',
			success:function(data){
				/* ê¸°ì¡´ì˜ ë™ê¸°ë°©ì‹ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ í…Œì´ë¸”ì˜ ë°ì´í„°ë“¤ì„ ë¹„ìš´ë‹¤.*/
				$(".tr-sync").empty();
				var arr = [];
				/* '<td>'+data.resultList[i].post_pnum+'</td>' */
				for(var i = 0; i < data.resultList.length; i++){
					arr[i] = '<td>'+data.resultList[i].post_pnum+'</td>'
							+'<td>'+data.resultList[i].cat_cname+'</td>'
							+'<td>'+data.resultList[i].post_title+'</td>'
							+'<td>'+data.resultList[i].user_id+'</td>'
							+'<td>'+data.resultList[i].post_regdate+'</td>'
							+'<td>'+data.resultList[i].post_hits+'</td>'
					
				/* ë¹„ë™ê¸°ë°©ì‹ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë“¤ë¡œ í…Œì´ë¸”ì˜ í–‰ë“¤ì„ ì±„ìš´ë‹¤ */
					$("#tr-async"+(i+1)+"").attr("onclick", "moveToDetail("+data.resultList[i].post_pnum+")").html(arr[i])
				}
				
			},
			error:function(data){
				alert("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
			}
			
		})
		
	}
	
	/* ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ í´ë¦­í–ˆì„ ë•Œ ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€ ë¶„ë¥˜ */
	function category_pagination(currentPage, categoryName){
		$.ajax({
			url : "<c:url value='/main.do'/>",
			type : 'POST',
			data: { 'currentPage' : currentPage, 'cat_cname' : categoryName },
			dataType: 'json',
			success:function(data){
				
				/* í˜ì´ì§•ì— í•„ìš”í•œ ë³€ìˆ˜ */
				/* í˜„ì¬ í˜ì´ì§€ */
				var cp = currentPage; 
				/* í•œë²ˆì— ê²Œì‹œë  í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ */
				var size = data.paginationInfo.pageSize;
				/* í˜„ì¬ í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ì˜ ë§ˆì§€ë§‰ í˜ì´ì§€ ë²ˆí˜¸ */
				var ep = Math.ceil(currentPage/size)*10;
				/* í˜„ì¬ í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ì˜ ì²« í˜ì´ì§€ ë²ˆí˜¸ */
				var sp = (ep-size)+1;
				
				/* ì¹´í…Œê³ ë¦¬ë¥¼ í´ë¦­í–ˆì„ ê²½ìš°*/
				if(data.boardVO.cat_cname != null){
					
					/* ì¹´í…Œê³ ë¦¬ëª…, ì´ í˜ì´ì§€ ìˆ˜ hidden ì†ì„±ì— ê°’ ì§€ì •*/
					$("#category_name").val(data.boardVO.cat_cname)
					$("#totalPage").val(Number(data.resultCnt/data.paginationInfo.recordCountPerPage));
					var str = '';
					var cat_cname = data.boardVO.cat_cname;
					var tp = Number(data.resultCnt/data.paginationInfo.recordCountPerPage);
					
					/* ëí˜ì´ì§€ê°€ ì´ í˜ì´ì§€ë³´ë‹¤ ì‘ë‹¤ë©´ */
					if(ep < tp){
						for(var i = sp; i <= ep; i++){
							str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+', \''+cat_cname+'\');">'+i+'</a>'
						}
						str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+size+', '+cp+', \'next\')">ë‹¤ìŒ</a>'
					/* ê·¸ ì™¸ì˜ ê²½ìš°, ëí˜ì´ì§€ê°€ ì´í˜ì´ì§€ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ ë•Œ  */
					}else{
						ep = tp
						for(var i = sp; i <= ep; i++){
							str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+', \''+cat_cname+'\');">'+i+'</a>'
						}
					}
					
					pagination(1, cat_cname)
				/* 'ì „ì²´' ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ê²½ìš° */
				}else{
					var str = '';
					var totalPage = Number(data.resultCnt/data.paginationInfo.recordCountPerPage);
					$("#category_name").val('')
					$("#totalPage").val(Number(data.resultCnt/data.paginationInfo.recordCountPerPage));
					for(var i = sp; i <= ep; i++){
						str += '<a class="paging" href="javascript:void(0)" onclick="javascript:pagination('+i+');">'+i+'</a>'
					}
					str += '<a href="javascript:void(0)" onclick="javascript:pageMove('+data.paginationInfo.pageSize+', '+data.boardVO.currentPage+', \'next\')">ë‹¤ìŒ</a>'
					
					pagination(1)
				}
				$("#pagination").html(str);
			}
		})
	}
	
	function closeModal() {
		$('#modal_back').hide();
	};
	$(function(){
		$("#login_btn").click(function(){
			$(location).attr("href", "${pageContext.request.contextPath}/login/logIn.do");
		});
		
		$("#logout_btn").click(function(){
			$(location).attr("href", "${pageContext.request.contextPath}/login/logOut.do")
		});
		
		$("#update_btn").click(function(){
			$("#modal_back").css("display","block");
		});
		
		/* íšŒì› ì •ë³´ ìˆ˜ì • */
		$("#updateUser_btn").click(function(){
			var inputFile = $("input[name='uploadFile']");
			var files = inputFile[0].files;
			
			var form = $("#frm_update")[0];
			var formData = new FormData(form);
			
			$.ajax({
				type: "POST",
				data: formData,	// json(ì „ì†¡) íƒ€ì…
				url: "${pageContext.request.contextPath}/account/updateUserWrite.do",
				contentType : false,
		        processData : false,
		        cache : false,
				
				success: function(result){
					if(result == "ok"){
						alert("íšŒì›ì •ë³´ ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
						$("#modal_back").css("display", "none")
						$("#user_pw").val("");
					} else{
						alert("íšŒì›ì •ë³´ ìˆ˜ì •ì´ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.<br>(ë¹„ë°€ë²ˆí˜¸ë¥¼ í•œë²ˆ í™•ì¸í•´ì£¼ì„¸ìš”.");
					}
				},
				error: function(){	//ì¥ì•  ë°œìƒ
					alert("ì˜¤ë¥˜ë°œìƒ");
				}
			});
		});
	});
	
	/* ê²Œì‹œê¸€ í´ë¦­ ì‹œ ìƒì„¸ì •ë³´ë¡œ ì´ë™ */
	function moveToDetail(post_pnum){
		console.log(post_pnum)
		


		$.ajax({
			url: "${pageContext.request.contextPath}/boardDetail.do",
			type: "GET",
			dataType: "json",
			data: {'post_pnum' : post_pnum},
			success: function(data){ 
				
					alert("ì„±ê³µ^_^");
					
					
// 					ì½˜ì†”ì— ë°ì´í„°ê°’ ì°ì–´ë³´ê¸°
					console.log(data);
					console.log("================")
					console.log("================")
					console.log("================")
					console.log("================")
					console.log(data.resultVO);
					console.log("================")
					console.log("================")
// 					console.log(data.resultVO2.cat_cname);
					

// 			 		Display Modal
					$(".hidden").css("display", "flex");
					
// 					ë°ì´í„° ëª¨ë‹¬ì°½ìœ¼ë¡œ ì´ë™
					$("#post_pnum").html(data.resultVO.post_pnum);
					$("#post_regdate").html(data.resultVO.post_regdate);
					$("#post_title").html(data.resultVO.post_title);
					$("#post_contents").html(data.resultVO.post_contents);
					$("#post_img").html(data.resultVO.post_img);
					$("#post_file").html(data.resultVO.post_file);
					$("#post_fname").html(data.resultVO.post_fname);
					$("#post_like").html(data.resultVO.post_like);
					$("#post_hits").html(data.resultVO.post_hits);
					$("#user_id").html(data.resultVO.user_id);
					$("#cat_cname").html(data.resultVO.cat_cname);
					
						
					
					
					
					
					
					
			}, 
			error: function (request, status, error){
					alert("ì‹¤íŒ¨ ã… ã… ");
			} 
		});
	}
	
 	/* ëª¨ë‹¬ ì°½ ë‹«ê¸° */
	function closeModal(){
		console.log("test")
		$(".hidden").css("display", "none")
	}
	
	
	/* ê´€ë¦¬ì ë²„íŠ¼ */
	function moveToAdmin(){
		console.log("test")
	}
<<<<<<< .mine
	
||||||| .r21
=======
	
	//ì¸ë„¤ì¼
	document.addEventListener('DOMContentLoaded', function(){
		
	    //ì´ë¯¸ì§€ ê°ì²´ íƒ€ì…ìœ¼ë¡œ ì´ë¯¸ì§€ í™•ì¥ì ë°¸ë¦¬ë°ì´ì…˜
	    var validateType = function(img){
	        return (['image/jpeg','image/jpg','image/png'].indexOf(img.type) > -1);
	    }
	
	    var validateName = function(fname){
	        let extensions = ['jpeg','jpg','png'];
	        let fparts = fname.split('.');
	        let fext = '';
	    
	        if(fparts.length > 1){
	            fext = fparts[fparts.length-1];
	        }
	    
	        let validated = false;
	        
	        if(fext != ''){
	            extensions.forEach(function(ext){
	                if(ext == fext){
	                }
	            });
	        }
	    
	        return validated;
	    }
	
	    // íŒŒì¼ ì„ íƒ í•„ë“œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
	    document.getElementById('uploadFile').addEventListener('change', function(e){
	        let elem = e.target;
	        if(validateType(elem.files[0])){
	            let preview = document.querySelector('.thumb');
	            preview.src = URL.createObjectURL(elem.files[0]); //íŒŒì¼ ê°ì²´ì—ì„œ ì´ë¯¸ì§€ ë°ì´í„° ê°€ì ¸ì˜´.
	            document.querySelector('.dellink').style.display = 'block'; // ì´ë¯¸ì§€ ì‚­ì œ ë§í¬ í‘œì‹œ
	            preview.onload = function() {
	                URL.revokeObjectURL(preview.src); //URL ê°ì²´ í•´ì œ
	            }
	        }else{
	        console.log('ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.');
	        }
	    });
	
	    document.querySelector('.dellink').addEventListener('click', function(e){
	        let dellink = e.target;
	        let preview = dellink.previousElementSibling;
	        preview.src = "<c:url value='/'/>images/ë¼ì´ì–¸ ì‚¬ì§„.png"; // ì¸ë„¤ì¼ ì´ë¯¸ì§€ src ë°ì´í„° í•´ì œ
	        document.querySelector('.dellink').style.display = 'none';
	    });
	});
>>>>>>> .r24
</script>
</head>
<body>
	<div id="hi"></div>
	<div id="all_div">
	<header>
		<div id="menu">
			<c:choose>
				<c:when test="${not empty Session_user_id}">
					<button>${Session_user_id}</button>
				</c:when>
			</c:choose>
			<input class="menu-btn" type="button" value="ê´€ë¦¬ì" onclick="moveToAdmin()" />
			
			<c:choose>
				<c:when test="${not empty Session_user_id}">
					<input id="update_btn" class="menu-btn" type="button" value="ì •ë³´ìˆ˜ì •" />
					<input id="logout_btn" class="menu-btn" type="button" value="ë¡œê·¸ì•„ì›ƒ"/>
				</c:when>
				<c:otherwise>
					<input id="login_btn" class="menu-btn" type="button" value="ë¡œê·¸ì¸" />
				</c:otherwise>
			</c:choose>
		</div>
	</header>
	
	<div id="logo-div">
		<div id="logo-img">
			<img src='<c:url value="/images/logo.png"/>' alt="ë¡œê³ " />
		</div>
	</div>
	
		<div id="board-category">
			<div id="category">
		
				<button class="ui grey button" onclick="category_pagination(1)">ì „ì²´</button>
				<c:forEach var="category" items="${resultCategory }">
					<button class="ui grey button" onclick="category_pagination(1, '${category.cat_cname}');"><c:out value='${category.cat_cname }'/></button>
				</c:forEach>
			</div>
		</div>
		
	<div id="board-div">
		<div id="board">
		<input type="hidden" id="cp" value="<c:out value='${paginationInfo.currentPageNo}'/>" />
		<input type="hidden" id="pageSize" value="<c:out value='${paginationInfo.pageSize }' />" />
		<input type="hidden" id="totalPage" value="<c:out value='${resultCnt/paginationInfo.recordCountPerPage}'/>"/>			
		<input type="hidden" id="category_name" value="<c:out value='${boardVO.cat_cname }'/>"/>			
			<table class="ui celled table">
				<colgroup>
					<col width="50px">
					<col width="60px">
					<col width="230px">
					<col width="50px">
					<col width="70px">
					<col width="40px">
				</colgroup>
				<thead>
					<tr>
						<th>ë²ˆí˜¸</th>
						<th>ì¹´í…Œê³ ë¦¬</th>
						<th>ì œëª©</th>
						<th>ì‘ì„±ì</th>
						<th>ë‚ ì§œ</th>
						<th>ì¡°íšŒìˆ˜</th>
					</tr>
				</thead>
				<c:forEach var="result" items="${resultList }" >
				<div id= "modal_open">
					<tr  class="tr-sync" style='cursor:pointer;' onclick="moveToDetail(${result.post_pnum});">
						<td data-label="ë²ˆí˜¸"><c:out value="${result.post_pnum }" /></td>
						<td data-label="ì¹´í…Œê³ ë¦¬"><c:out value="${result.cat_cname }"/></td>
						<td data-label="ì œëª©"><c:out value="${result.post_title }"/></td>
						<td data-label="ì‘ì„±ì"><c:out value="${result.user_id }"/></td>
						<td data-label="ë‚ ì§œ"><c:out value="${result.post_regdate }"/></td>
						<td data-label="ì¡°íšŒìˆ˜"><c:out value="${result.post_hits }"/></td>
					</tr>
				</div>
				</c:forEach>
					<tr id="tr-async1" class="tr-async" onclick="moveToDetail();"></tr>
					<tr id="tr-async2" class="tr-async" onclick="moveToDetail();"></tr>
					<tr id="tr-async3" class="tr-async" onclick="moveToDetail();"></tr>
					<tr id="tr-async4" class="tr-async" onclick="moveToDetail();"></tr>
					<tr id="tr-async5" class="tr-async" onclick="moveToDetail();"></tr>
					<tr id="tr-async6" class="tr-async" onclick="moveToDetail();"></tr>
			</table>
			<div id="pagination">
				<c:forEach var="pageNum" begin="1" end="${paginationInfo.pageSize }">
					<a class="paging" href="javascript:void(0)" onclick="javascript:pagination(${pageNum});"><c:out value="${pageNum }"/></a>
				</c:forEach>
					<a href="javascript:void(0)" onclick="javascript:pageMove(${paginationInfo.pageSize}, ${paginationInfo.currentPageNo}, 'next')"><c:out value="ë‹¤ìŒ"/></a>
			</div>							
			
		</div>
			   

		    
		
<!-- ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ì°½	 -->

		<div class="modal hidden">
			<div class="modal__overlay"></div>	
			<div class="modal__content">
			
				<!-- 
				<h3>ê²Œì‹œê¸€ ë³´ê¸°</h3>
				<div> ì‘ì„±ì¼ì : <span id="post_regdate">>  </span> </div>
				<div> ì¡°íšŒìˆ˜ : <span id="post_hits">>  </span> </div>
				<div> ì‘ì„±ì : <span id="user_id">>  </span> </div>
				<br>
				ì œëª©   <div id="post_title"> </div>
				ë‚´ìš© <div id="post_contents"> </div>
				
				<br>
				<div>
					<button onclick="closeModal()">ëª©ë¡</button>			
				</div>
				<hr>
				<textarea placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”." rows="1" cols="65"></textarea>
				<br>
				<button>ëŒ“ê¸€ ì‘ì„±</button>
				 -->
				 
				<h3> ê²Œì‹œíŒ ìƒì„¸ë‚´ìš© </h3> <br>
				<table class="modal_table">
					<tr><th bgcolor="#C0D6E4" style="height: 33px;">ì‘ì„±ì¼</th><th style="text-align: left;" colspan="2" id="post_regdate"></th></tr>
		  			<tr><th bgcolor="#C0D6E4" style="height: 33px;">ì‘ì„±ì</th><th style="text-align: left;"colspan="2" id="user_id"></th></tr>
		  			<tr><th bgcolor="#C0D6E4" style="height: 33px;">ì œëª©</th><th style="text-align: left;" colspan="2"id="post_title"></th></tr>
		  			<tr><th bgcolor="#C0D6E4" style="height: 200px; width: 100px;">ë‚´ìš©</th><th style="width: 100px" id="post_img"></th><th style="text-align: left;" id="post_contents"></th></tr>
		  			<tr><th bgcolor="#C0D6E4" style="height: 33px;">ì²¨ë¶€íŒŒì¼</th><th style="text-align: left;" colspan="2" id="post_file"></th></tr>
		  			
				</table>
				<br>
				<div id="center" class="post_like">
					<button>ğŸ‘</button>
				</div>
				<br>
				<div id="center">
					<button>ìˆ˜ì •</button>
		    		<button>ì‚­ì œ</button>
					<button onclick="closeModal()">ëª©ë¡</button>			
		    	</div>
		    	<hr>
		    	
		    	
		    	comment <br><br>
		    	
		    	<textarea placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”." rows="2" cols="60"></textarea>
		    	<button>ëŒ“ê¸€ì‘ì„±</button>	
		
		
		
		
		
		
			</div>
		</div>	
<!-- ì—¬ê¸°ê¹Œì§€ -->

	<div id="modal_back">
		<div id="wrap">
	        <div id="header">
	            <h1>ì‚¬ìš©ì ì •ë³´ìˆ˜ì •</h1>
	        </div>
	        <form name = "updateUser" id="frm_update">
		        <div class="ui form success error">
		        	<c:forEach var="avo" items="${MemberVO }" >
			            <div id="main_left">
			                <div class="field" id="image_field">
			                    <label>ëŒ€í‘œ ì´ë¯¸ì§€</label>
			                    <label for="uploadFile" id="image_field_upload">ì—…ë¡œë“œ</label>
			                    <input type="file" id="uploadFile" accept="image/jpeg, image/jpg, image/png" name="uploadFile">
			                    <img class="thumb" src="/NTBimages/${avo.user_img }" style="width: 100px; height: 100px;">
			                    <a href="javascript:void(0);" class="dellink">íŒŒì¼ ì‚­ì œ</a>
			                </div>
			            </div>
			
			            <div id="main_right">
			                <div class="field">
			                    <label>ì•„ì´ë””</label>
			                    <input id="inputID" type="text" name="user_id" value="${avo.user_id }" readonly>
			                </div>
			
			                <div class="field">
			                    <label>ì´ë¦„</label>
			                    <input type="text" id="user_name" name="user_name" value="${avo.user_name }" readonly>
			                </div>
			    
			                <div class="field">
			                    <label>ë¹„ë°€ë²ˆí˜¸ *</label>
			                    <input type="password" id="user_pw" name="user_pw">
			                </div>
			    
			                <div class="field">
			                    <label>ì´ë©”ì¼</label>
								<input type="email" id="user_email" name="user_email" value="${avo.user_email }">  
			                </div>
			
			                <div class="field">
			                    <label>ì „í™”ë²ˆí˜¸</label>
			                    <input type="text" id="user_pnum" name="user_pnum" value="${avo.user_pnum }">
			                </div>
			                
			                <div class="field">
			                	<label style="display: none;">ìƒë…„ì›”ì¼</label>  
			                	<input type="hidden" id="user_birth" name="user_birth" value="${avo.user_birth }"/>
			                </div>
			               	<input type="hidden" id="user_rank" name="user_rank" value="${avo.user_rank }"/>
			            </div>
		            </c:forEach>
		        </div>
	        <div class="clear"></div>
	</form>
	        <div id="footer">
	            <button id="updateUser_btn" type="button"  class="ui button">ìˆ˜ì •</button>
	            <button id="update_cancel_btn" onClick="closeModal();" class="ui button">ì·¨ì†Œ</button>
	        </div>
	        
	            
	    </div>
    </div>
    
 
    
    
</body>
</html>